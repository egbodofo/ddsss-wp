!function(d){d(document).ready(function(){var e=d(".lava-booking-form");if(e.length){var t=new Date,a=new Date,i=e.data("min-days"),n=new Date;n.setDate(n.getDate()+i),d('input[id^="bf_check_in_date"]').datepicker({dateFormat:lava_js_data.date_time_format,firstDay:lava_js_data.date_start,minDate:t,maxDate:"+365D",numberOfMonths:1,onSelect:function(){var e=d(this).attr("id").replace("bf_check_in_date_",""),t=d("#bf_check_out_date_"+e),a=d(this).datepicker("getDate");a&&a.setDate(a.getDate()+i),t.datepicker("option","minDate",a)}}).on("click",function(){d(this).datepicker("show")}),d('input[id^="bf_check_out_date"]').datepicker({dateFormat:lava_js_data.date_time_format,minDate:a,maxDate:"+365D",numberOfMonths:1,onSelect:function(){var e=d(this).attr("id").replace("bf_check_out_date_",""),t=d("#bf_check_in_date_"+e),a=d(this).datepicker("getDate");a&&a.setDate(a.getDate()-i),t.datepicker("option","maxDate",a)}}).on("click",function(){d(this).datepicker("show")}),d('input[id^="bf_check_in_date"]').datepicker("setDate","today"),d('input[id^="bf_check_out_date"]').datepicker("setDate",n),e.find('select[name="bf_guests"]').dropkick({mobile:!0,change:function(){var a=this.selectedIndex;d(this.data.select).find("option").each(function(e,t){e===a?d(t).attr("selected","selected"):d(t).removeAttr("selected")})}})}d(document.body).on("show.bs.modal",".lava-booking-form-modal",function(){var e=d(this);e.after('<div class="modal-backdrop show"></div>');var t=e.parent().find(".hotel-booking-search");if(t.length){var a=t.find('input[name="bf_check_in_date"]').datepicker("getDate"),i=t.find('input[name="bf_check_out_date"]').datepicker("getDate"),n=t.find(".hb_input_guests :selected").val(),o=e.find('select[name="bf_guests"]');a&&e.find('input[name="bf_check_in_date"]').datepicker("setDate",a),i&&e.find('input[name="bf_check_out_date"]').datepicker("setDate",i),""!=n&&(o.find(":selected").removeAttr("selected",""),o.find('option[value="'+n+'"]').attr("selected","selected"))}}).on("hide.bs.modal",".lava-booking-form-modal",function(){d(this).siblings(".modal-backdrop").remove()}).on("submit",".booking-form",function(e){e.preventDefault();var t=d(this),a=t.siblings(".booking-form-message"),i=!1;if(t.find(".validate").each(function(){var e=d(this);""===e.val()?(e.addClass("invalid"),i=!0):e.removeClass("invalid")}),i)return a.html('<span class="error">'+lava_js_data.required_fields+"</span>"),!1;d.ajax({type:"POST",url:lava_js_data.ajax_url,dataType:"json",data:{action:"lava_booking_form",bf_data:t.serialize()},beforeSend:function(){t.find("booking-form-submit").addClass("hb_loading")},error:function(e,t){console.log(e),console.log(t)},success:function(e){e.data.message&&(a.html(e.data.message),t.find("booking-form-submit").removeClass("hb_loading"),t.hide())}})})})}(jQuery);